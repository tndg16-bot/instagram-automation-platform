# Instagram自動化SaaS 要件定義書

---

**文書情報**
- 文書名: Instagram自動化SaaS 要件定義書
- バージョン: 1.0
- 作成日: 2026年1月20日
- 作成者: プロダクトチーム
- ステークホルダー:
  - プロダクトマネージャー
  - エンジニアリングチーム
  - デザインチーム
  - カスタマーサクセス

---

## 目次

1. [プロジェクト概要](#1-プロジェクト概要)
2. [背景と目的](#2-背景と目的)
3. [業務要件](#3-業務要件)
4. [機能要件](#4-機能要件)
5. [非機能要件](#5-非機能要件)
6. [制約事項](#6-制約事項)
7. [前提条件](#7-前提条件)
8. [インターフェース要件](#8-インターフェース要件)
9. [データ要件](#9-データ要件)
10. [セキュリティ要件](#10-セキュリティ要件)
11. [運用要件](#11-運用要件)

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
Instagram Automation Platform（InstaFlow AI）

### 1.2 プロジェクト目的
Instagram運用における手作業を自動化し、ビジネスの成長を支援するSaaSプラットフォームを開発・提供する。公式APIとAIを活用し、安全かつ効果的な運用を実現する。

### 1.3 対象ユーザー
- 中小企業・店舗運営者
- ECサイト運営者
- インフルエンサー・クリエイター
- マーケティング代理店

---

## 2. 背景と目的

### 2.1 背景と現状課題

**市場背景**
- Instagram月間アクティブユーザー数: 20億人以上
- 日本国内Instagramユーザー数: 約3,300万人（2024年）
- ビジネスアカウント数: 2億以上

**ユーザー課題**
1. **運用工数の増加**
   - フォロワーが増えるほどDM・コメント対応が追いつかない
   - 夜間・休日の問い合わせ対応が困難
   - 1日の半分が返信業務で消費されるケースあり

2. **機会損失**
   - 返信遅延による成約機会の喪失
   - 24時間対応体制の維持が困難

3. **効果測定の困難**
   - 手作業のため、エンゲージメント分析が属人化
   - ROI測定が感覚的になりやすい

**競合状況**
- エルグラム: 国内導入2万件だが、UIが複雑、AI連携が限定
- LinkDM: 海外実績豊富だが、日本語サポートが弱い
- ManyChat: 豊富な統合機能だが、Instagram機能が限定

### 2.2 プロジェクト目的

**主目的**
Instagram運用の自動化により、ユーザーの本来のビジネス活動に集中できる環境を提供する。

**具体的目標**
1. 運用工数を70%削減
2. 24時間365日の顧客対応を実現
3. エンゲージメント率を平均30%向上
4. アカウント凍結リスクをゼロに近づける（公式API活用）
5. AIによるパーソナライズされた自動応答を実現

---

## 3. 業務要件

### 3.1 ユースケース

#### UC-001: DM一斉配信
- ユーザーは複数のフォロワーに対し、一斉にDMを送信できる
- 配信対象をセグメント化（タグ、属性等）して送信できる
- 予約配信（日時指定）が可能

#### UC-002: コメント自動返信
- ユーザーが投稿したコメントに対し、設定した条件に基づき自動で返信が送信される
- AIがコメントの文脈を理解し、適切な返信を生成する

#### UC-003: いいね返し
- ユーザーの投稿に対するいいねを、条件に基づき自動でいいね返しを行う
- 1日当たりの実行回数を制限し、アカウント保護を図る

#### UC-004: 自動フォロー
- 指定した条件（フォロワー数、ハッシュタグ等）に基づき、自動でフォローを行う
- フォローバック機能により、自分をフォローしたユーザーに自動でフォロー返しを行う

#### UC-005: 自動投稿
- ユーザーは投稿（画像、動画、リール、ストーリーズ）を事前にスケジュール登録し、指定日時に自動投稿できる
- 複数アカウントの管理・切替が可能

#### UC-006: アナリティクス確認
- ユーザーは配信効果、エンゲージメント、フォロワー推移などのデータをダッシュボードで確認できる
- レポートをCSV等でエクスポートできる

#### UC-007: ワークフロー自動化（AIステップ）
- ユーザーはビジュアルエディタで複数のアクションを連携したワークフローを作成できる
- AIステップを組み込み、条件分岐やパーソナライズされた応答を実現できる

### 3.2 ビジネスフロー

```
┌─────────────────────────────────────────────────────────┐
│                 ユーザー登録・認証                    │
└────────────────────┬────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────┐
│         Instagramアカウント連携（OAuth）            │
└────────────────────┬────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────┐
│            ダッシュボードでの操作                     │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │DM配信    │  │投稿管理  │  │ワークフロー│  │
│  └──────────┘  └──────────┘  └──────────┘  │
└────────────────────┬────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────┐
│         Instagram Graph APIへのリクエスト              │
└────────────────────┬────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────┐
│              Instagramでの実行                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │DM送信    │  │コメント返信│  │投稿      │  │
│  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────┘
```

### 3.3 業務ルール

**配信ルール**
- 一斉配信は、既にDMのやり取りがある相手にのみ送信可能（スパム防止）
- 1日の配信数制限を設け、Instagramのレート制限を遵守
- 配信履歴を14日間保持し、重複送信を防止

**自動化ルール**
- 自動いいね・フォローは、1時間あたりの実行回数を制限
- スパムと判定されるキーワード・パターンを除外設定可能
- 全自動化オプションと承認制オプションを選択可能

---

## 4. 機能要件

### 4.1 ユーザー管理機能

#### REQ-001: ユーザー登録・認証
- 項目:
  - メールアドレス登録
  - パスワード設定（8文字以上、大文字小文字数字混在）
  - メール認証による本人確認
- 要件:
  - OAuth 2.0対応
  - SNS連携ログイン（Google、LINE等）
  - パスワードリマインダー機能

#### REQ-002: Instagramアカウント連携
- 項目:
  - Instagram Businessアカウント連携
  - 複数アカウント管理（プラン別に制限）
  - アクセストークンの安全な管理
- 要件:
  - Meta Facebook SDK for Loginの使用
  - トークンの自動更新
  - 接続解除機能

#### REQ-003: 権限管理
- 項目:
  - ロール定義（オーナー、管理者、編集者、閲覧者）
  - 機能ごとの権限設定
- 要件:
  - オーナー: 全機能アクセス可能
  - 管理者: 配信・設定変更可能
  - 編集者: コンテンツ作成のみ
  - 閲覧者: レポート閲覧のみ

### 4.2 DM機能

#### REQ-004: 一斉配信
- 項目:
  - 配信先選択（全フォロワー、セグメント、特定ユーザー）
  - メッセージ作成（テキスト、画像、動画、ボタン付き）
  - 予約配信（日時指定）
  - 配信スケジュール管理
- 要件:
  - 1回の配信で送信可能な上限: 1,000件（レート制限対応）
  - メッセージ長: 1,000文字以内
  - 画像サイズ: 最大1080x1080px、30MB以内
  - 配信前プレビュー機能

#### REQ-005: セグメント配信
- 項目:
  - セグメント作成（条件設定）
  - タグ管理
  - 属性セグメント（フォロワー数、エンゲージメント等）
- 要件:
  - AND/OR条件の複合指定
  - セグメントの保存・再利用
  - セグメントの動的更新（フォロワー増減に追従）

#### REQ-006: ステップ配信
- 項目:
  - 複数メッセージのシーケンス設定
  - 各ステップの間隔設定
  - ユーザー応答による次ステップ分岐
- 要件:
  - 最大ステップ数: 10
  - ステップ間隔: 1時間〜30日
  - 分岐条件: 5つまで
  - オプトアウト対応

#### REQ-007: 配信管理
- 項目:
  - 配信履歴一覧
  - 配信状態（予約中、配信中、完了、失敗）
  - 配信停止・削除
- 要件:
  - 配信結果の集計（送信数、開封数、クリック数）
  - 失敗時の再送機能
  - 履歴保持期間: 90日

### 4.3 コメント機能

#### REQ-008: コメント監視
- 項目:
  - 自分の投稿へのコメント監視
  - メンション監視
  - ハッシュタグ監視
- 要件:
  - Webhookによるリアルタイム検知
  - 監視対象: 最大50投稿（プラン別）
  - スパムフィルター（キーワード、URL、絵文字過多）

#### REQ-009: 自動返信
- 項目:
  - トリガー条件設定
  - 返信テンプレート管理
  - AI返信生成
- 要件:
  - トリガー: キーワード、ハッシュタグ、全コメント
  - AIモデル: GPT-4/Claude等の選択可能
  - 文脈理解による適切な返信生成
  - トーン設定（丁寧、カジュアル、プロフェッショナル）

#### REQ-010: 返信管理
- 項目:
  - 返信履歴一覧
  - 手動承認モード
  - 返信の追加・編集
- 要件:
  - 承認待ちキュー
  - 一括承認・却下
  - 返信のA/Bテスト機能

### 4.4 いいね・フォロー機能

#### REQ-011: いいね返し
- 項目:
  - 対象投稿設定
  - 実行スケジュール
  - 1日当たりの上限設定
- 要件:
  - 対象: 自分の投稿、特定ハッシュタグ投稿
  - 上限: 1日最大500いいね（レート制限対応）
  - 実行間隔: 1時間ごとの分散実行
  - ランダム化（ボット検知回避）

#### REQ-012: 自動フォロー
- 項目:
  - 検索条件設定
  - フォローバック
  - 自動アンフォロー
- 要件:
  - 検索条件: ユーザー名、ハッシュタグ、類似アカウント
  - フォローバック: 自分をフォローしたユーザーに自動フォロー
  - アンフォロー条件: フォロー後〇日でフォロー返しがない場合
  - 1日フォロー数上限: 50

### 4.5 投稿機能

#### REQ-013: 予約投稿
- 項目:
  - 投稿コンテンツ作成
  - スケジュール設定
  - 複数アカウント切替
- 要件:
  - 対象: 投稿、リール、ストーリーズ
  - 画像サイズ: 投稿1080x1080、リール1080x1920
  - キャプション: 2,200文字以内
  - ハッシュタグ: 最大30個
  - 予約: 最大1ヶ月先まで

#### REQ-014: キャプションAI生成
- 項目:
  - 画像・動画のアップロード
  - キャプション生成
  - ハッシュタッグ推奨
- 要件:
  - AIモデル選択（GPT-4, Claude等）
  - スタイル設定（プロフェッショナル、カジュアル、エモーショナル）
  - 複数パターン生成・選択
  - 長さ調整（短め、標準、長め）

### 4.6 AIステップ・ワークフロー機能

#### REQ-015: ビジュアルワークフロービルダー
- 項目:
  - ノードベースのフロー作成
  - ノードのドラッグ&ドロップ
  - 接続線の描画
- 要件:
  - ノード種類: トリガー、アクション、条件、AIステップ、待機、終了
  - 最大ノード数: 100
  - 複数分岐・ループ対応
  - ズーム機能
  - コピー&ペースト

#### REQ-016: トリガーノード
- 項目:
  - イベントトリガー
  - スケジュールトリガー
  - Webhookトリガー
- 要件:
  - イベント: 新しいコメント、新規フォロワー、DM受信
  - スケジュール: 毎日、毎週、毎月、日時指定
  - Webhook: 外部からのHTTPリクエスト

#### REQ-017: AIステップノード
- 項目:
  - プロンプト入力
  - モデル選択
  - 出力形式設定
- 要件:
  - サポートモデル: GPT-4, Claude, Gemini等
  - 入力変数: 前段ノードのデータ参照
  - 出力: JSON、テキスト、画像生成
  - コスト計算・表示

#### REQ-018: 条件分岐ノード
- 項目:
  - 条件式入力
  - 分岐数設定
- 要件:
  - 条件: 変数の比較、含む、正規表現
  - 分岐数: 最大10
  - デフォルト分岐

#### REQ-019: アクションノード
- 項目:
  - DM送信
  - コメント返信
  - いいね
  - フォロー
  - 変数設定
- 要件:
  - ダイナミック値（変数埋め込み）
  - 複数アクションの同時実行
  - エラーハンドリング

#### REQ-020: ワークフロー管理
- 項目:
  - フロー一覧
  - フロー有効/無効
  - 実行ログ
  - テスト実行
- 要件:
  - バージョン管理
  - テンプレート保存・共有
  - 実行履歴: 1ヶ月保持
  - デバッグモード（ステップごとの変数確認）

### 4.7 アナリティクス機能

#### REQ-021: ダッシュボード
- 項目:
  - 概要指標表示
  - グラフ可視化
  - ドリルダウン
- 要件:
  - 表示指標:
    - フォロワー数（推移）
    - エンゲージメント率（いいね、コメント、シェア）
    - DM開封率、クリック率
    - 配信効果（送信数、到達数）
  - 期間選択: 今日、7日、30日、90日、カスタム
  - グラフ種類: 折れ線、棒、円

#### REQ-022: レポート作成
- 項目:
  - レポートテンプレート選択
  - 期間設定
  - 指標選択
- 要件:
  - エクスポート形式: CSV, PDF, Excel
  - スケジュール作成（週間、月間レポート自動生成）
  - メール送信
  - カスタムレポート保存

### 4.8 API連携機能

#### REQ-023: Webhook
- 項目:
  - イベント設定
  - エンドポイントURL設定
  - ペイロードカスタマイズ
- 要件:
  - サポートイベント: コメント、DM、フォロー、投稿、いいね
  - リトライ機能（失敗時）
  - シークレットキーによる認証
  - ログ確認

#### REQ-024: 外部API連携
- 項目:
  - Zapier連携
  - Make (旧Integromat)連携
  - n8n連携
- 要件:
  - OAuth認証
  - トリガー/アクション提供
  - マッピング設定

---

## 5. 非機能要件

### 5.1 パフォーマンス

| 項目 | 要件 | 目標値 |
|--------|--------|--------|
| ページ読み込み時間 | 初期画面 | 2秒以内 |
| ページ読み込み時間 | その他画面 | 1秒以内 |
| APIレスポンス | 通常時 | 200ms以内 |
| APIレスポンス | 複雑処理 | 2秒以内 |
| 同時接続数 | システム全体 | 10,000ユーザー |

### 5.2 可用性

| 項目 | 要件 |
|--------|--------|
| 稼働率 | 99.5%以上（月次） |
| 計画停止 | 最大24時間/年（事前通知） |
| 災害復旧 | RTO 4時間以内、RPO 1時間以内 |

### 5.3 拡張性

| 項目 | 要件 |
|--------|--------|
| ユーザー数 | 100,000アカウントまで対応 |
| データ量 | PB級まで対応 |
| 水平スケーリング | コンテナオーケストレーション対応 |

### 5.4 セキュリティ

| 項目 | 要件 |
|--------|--------|
| 通信暗号化 | TLS 1.2以上 |
| データ暗号化 | AES-256 |
| パスワード | BCryptハッシュ化 |
| 認証 | OAuth 2.0, JWT |
| ログ | 全操作ログの記録・保持1年 |
| 脆弱性診断 | 年1回以上の外部診断 |

### 5.5 ユーザビリティ

| 項目 | 要件 |
|--------|--------|
| 対応ブラウザ | Chrome, Firefox, Safari, Edge（最新2バージョン） |
| 対応OS | Windows 10+, macOS 10.15+, iOS 13+, Android 8+ |
| モバイル対応 | レスポンシブデザイン |
| アクセシビリティ | WCAG 2.1 Level AA準拠 |
| 多言語 | 日本語、英語（初期） |

### 5.6 運用・保守性

| 項目 | 要件 |
|--------|--------|
| 監視 | 24時間365日監視 |
| バックアップ | 日次バックアップ、3世代保持 |
| ログ分析 | 集約型ログ管理（Fluentd, Elasticsearch） |
| デプロイ | CI/CDパイプライン、ロールバック可能 |
| ドキュメント | API仕様、運用マニュアル整備 |

---

## 6. 制約事項

### 6.1 技術制約

- **Instagram Graph API**
  - 公式APIのみ使用
  - レート制限の厳密な遵守
  - APIバージョン: 最新版追従

- **Meta社ポリシー**
  - コミュニティガイドラインの遵守
  - スパム行為の禁止
  - ユーザー同意の必須

### 6.2 ビジネス制約

- **開発期間**
  - MVP: 3ヶ月
  - 全機能: 10ヶ月

- **予算**
  - 初年度開発費: 8,500万円
  - 月次運用費: 500万円

### 6.3 法的制約

- **データ保護**
  - 個人情報保護法対応
  - GDPR対応（海外展開時）

- **著作権**
  - 投稿コンテンツの権利確認
  - 商用利用の可否確認

---

## 7. 前提条件

### 7.1 外部依存

- **Instagram Graph API**
  - 開発者アカウント取得済み
  - App ID/Secret取得済み
  - Businessアカウント連携環境あり

- **AI API**
  - OpenAI API Key取得
  - Anthropic API Key取得

- **インフラ**
  - AWS/GCPアカウント準備済み
  - ドメイン取得済み

### 7.2 内部リソース

- **人材**
  - プロダクトマネージャー: 1名
  - エンジニア: 4名
  - デザイナー: 1名
  - カスタマーサクセス: 2名

---

## 8. インターフェース要件

### 8.1 ユーザーインターフェース

#### Webアプリケーション
- ダッシュボード形式
- レスポンシブデザイン（デスクトップ優先、モバイル対応）
- カラムテーマ（ライトモード、ダークモード）

#### 主要画面構成
1. **ログイン画面**
   - メール/パスワード入力
   - SNS連携ボタン

2. **ダッシュボード**
   - 概要指標カード
   - クイックアクションボタン
   - アクティビティフィード

3. **DM配信画面**
   - メッセージ作成エリア
   - 配信先選択
   - 予約設定

4. **ワークフロービルダー**
   - キャンバスエリア
   - ノードパレット
   - 設定パネル

5. **アナリティクス画面**
   - グラフエリア
   - フィルター設定
   - データテーブル

### 8.2 APIインターフェース

#### REST APIエンドポイント（例）

**認証**
```
POST /api/v1/auth/login
POST /api/v1/auth/logout
POST /api/v1/auth/refresh
```

**ユーザー管理**
```
GET  /api/v1/users/:id
PUT  /api/v1/users/:id
```

**Instagram連携**
```
POST /api/v1/instagram/connect
GET  /api/v1/instagram/accounts
```

**DM配信**
```
POST /api/v1/dm/broadcast
GET  /api/v1/dm/campaigns/:id
```

**ワークフロー**
```
POST /api/v1/workflows
GET  /api/v1/workflows/:id/executions
```

### 8.3 Instagram Graph API連携

**主要エンドポイント**
- `POST /{ig-user-id}/messages` - DM送信
- `GET /{ig-user-id}/comments` - コメント取得
- `POST /{ig-user-id}/comments/{comment-id}/replies` - コメント返信
- `GET /{ig-user-id}/insights` - インサイト取得
- `POST /{ig-user-id}/media` - 投稿作成

---

## 9. データ要件

### 9.1 主要データモデル

#### User（ユーザー）
```
- id: string (PK)
- email: string
- password_hash: string
- plan_id: string (FK)
- created_at: timestamp
- updated_at: timestamp
```

#### InstagramAccount（Instagramアカウント）
```
- id: string (PK)
- user_id: string (FK)
- ig_business_id: string
- access_token: string (encrypted)
- token_expires_at: timestamp
- username: string
- created_at: timestamp
```

#### DMCampaign（DM配信キャンペーン）
```
- id: string (PK)
- user_id: string (FK)
- ig_account_id: string (FK)
- content: json (message, media, buttons)
- schedule_at: timestamp
- status: enum (draft, scheduled, sending, completed, failed)
- sent_count: int
- created_at: timestamp
```

#### Workflow（ワークフロー）
```
- id: string (PK)
- user_id: string (FK)
- name: string
- definition: json (nodes, connections)
- is_active: boolean
- created_at: timestamp
```

#### Segment（セグメント）
```
- id: string (PK)
- user_id: string (FK)
- name: string
- conditions: json
- size: int (computed)
- updated_at: timestamp
```

#### Analytics（アナリティクス）
```
- id: string (PK)
- user_id: string (FK)
- ig_account_id: string (FK)
- metric_type: enum (followers, engagement, dm_open, dm_click)
- value: decimal
- date: date
```

### 9.2 データベース要件

- **RDBMS**: PostgreSQL 14+
- **NoSQL**: Redis（キャッシュ）、MongoDB（ログ）
- **保持期間**:
  - 操作ログ: 1年
  - アナリティクス: 2年
  - 配信履歴: 90日

### 9.3 データ移行・エクスポート

- **エクスポート**
  - ユーザー要求に応じたデータエクスポート
  - 形式: CSV, JSON
  - 期間: GDPR対応

- **削除**
  - アカウント削除時のデータ完全削除（30日以内）

---

## 10. セキュリティ要件

### 10.1 認証・認可

- **認証**
  - メール認証 + パスワード
  - OAuth 2.0（Google, LINE等）
  - JWTトークン（有効期限24時間）

- **認可**
  - RBAC（Role-Based Access Control）
  - リソースレベルの権限チェック
  - 管理画面へのアクセス制限

### 10.2 データ保護

- **保存時暗号化**
  - アクセストークン: AES-256
  - パスワード: BCrypt

- **通信時暗号化**
  - HTTPS（TLS 1.2+）
  - API通信: mTLS（外部連携時）

- **PII保護**
  - 個人情報の特定: ログに含めない
  - マスキング: 表示時に部分隠蔽
  - 同意取得: Instagramアカウント連携時

### 10.3 セキュリティ監査

- **監査ログ**
  - 全操作のログ記録
  - ログ保存: 1年
  - 不正アクセス検知

- **脆弱性管理**
  - 定期スキャン（月1回）
  - 依存パッケージ更新（週1回）
  - 修正パッチの72時間以内適用

---

## 11. 運用要件

### 11.1 監視・アラート

- **監視項目**
  - サーバーヘルス
  - APIエラーレート
  - レスポンスタイム
  - データベース接続数

- **アラート条件**
  - エラーレート: 5%超
  - レスポンスタイム: 2秒超
  - サーバー停止: 即時

- **通知先**
  - PagerDuty / Slack
  - 階層化: Critical（即時）、Warning（営業時間内）

### 11.2 バックアップ・復旧

- **バックアップスケジュール**
  - データベース: 日次（毎日3:00 JST）
  - ファイルストレージ: 週次
  - 世代管理: 30日分保持

- **復旧手順**
  - バックアップからのリストア（1時間以内）
  - 検証手順のドキュメント化
  - 定期復旧訓練（月1回）

### 11.3 サポート体制

- **サポートチャネル**
  - チャットサポート（営業時間9:00-18:00）
  - メール（24時間受付）
  - FAQナレッジベース

- **対応SLA**
  - Critical（システム全体停止）: 1時間以内
  - High（機能不全）: 4時間以内
  - Medium（一部制限）: 翌営業日
  - Low（質問・相談）: 2営業日以内

---

## 付録

### A. 用語集

| 用語 | 説明 |
|------|------|
| Instagram Graph API | Instagramが提供する公式API |
| Webhook | 特定イベント発生時に指定URLへHTTPリクエストを送信する仕組み |
| AIステップ | ワークフロー内でAI処理を挿入する機能ノード |
| セグメント | 特定条件で抽出したユーザーの集合 |
| レート制限 | API呼び出し回数・頻度の制限 |

### B. 参考資料

- Instagram Graph API公式ドキュメント
- Meta Business APIガイドライン
- OpenAI APIドキュメント
- Anthropic Claude APIドキュメント

---

**承認**

| 役割 | 氏名 | サイン | 日付 |
|--------|--------|--------|--------|
| プロダクトマネージャー | | | |
| テックリード | | | |
| プロジェクトオーナー | | | |
